name = "Damage source",
labels = c("Bloodthirst", "n = 1", "n = 2", "n = 3", "n = 4")) +
scale_y_continuous(breaks = seq(0, 120, by = 15),
limits = c(0, 120)) +
labs(x = "Attack Power",
y = "Damage per Rage",
title = "Whirlwind has higher DPR than BT at n = 4 or more.",
subtitle = "Assuming a dagger with 105 mean swing damage and 1.5 weapon speed.")
knitr::opts_chunk$set(echo = FALSE)
library(janitor)
library(tidyverse)
library(ggplot2)
library(ggridges)
theme_set(theme_light())
# The palette with grey:
cbp1 <- c("#999999", "#E69F00", "#56B4E9", "#009E73",
"#F0E442", "#0072B2", "#D55E00", "#CC79A7")
# The palette with black:
cbp2 <- c("#000000", "#E69F00", "#56B4E9", "#009E73",
"#F0E442", "#0072B2", "#D55E00", "#CC79A7")
ad_dmg <- function(ap, wpn_spd){
added_dmg = ap * (wpn_spd/14)
return(added_dmg)
}
bt <- function(ap){
damage = ap * 0.45
return(damage)
}
execute <- function(rage){
damage = 600 + ((rage-10)*15)
return(damage)
}
ww <- function(wpn_swing_dmg, wpn_spd, ap)
{
additional = ad_dmg(ap, wpn_spd)
total = wpn_swing_dmg + (additional)
return(total)
}
rage_gen <- function(damage, conversion = 230.6, hit_factor, wep_speed){
rage <- ((15*damage) / (4 * conversion)) + ((hit_factor * wep_speed)/2)
}
conversion_values_tbl <- tibble::tribble(
~`Player Level`,    ~`Conversion Value`,
10,  37.4,
20,  72.4,
30, 109.3,
40, 147.9,
50, 188.3,
60, 230.6
)
hit_factor_tbl <- tibble::tribble(
~`Weapon`,      ~`Hit Type`,   ~`Hit factor`,
"Main Hand",   "Normal Hit",  3.5,
"Main Hand", "Critical Hit",    7,
"Off Hand",   "Normal Hit", 1.75,
"Off Hand", "Critical Hit",  3.5
)
ap_thresh <- as.data.frame(seq(0, 3000, 100))
bt_dmg <- as.data.frame(lapply(ap_thresh, bt))
bt_dmg <- bind_cols(ap_thresh, bt_dmg)
bt_dmg <- bt_dmg %>%
unnest() %>%
transmute(AP = `seq(0, 3000, 100)`,
Damage = `seq.0..3000..100.`) %>%
mutate(dpr = Damage/30)
knitr::kable(conversion_values_tbl, booktabs = TRUE,
caption = "Rage conversion values.")
knitr::kable(hit_factor_tbl, booktabs = TRUE,
caption = "Hit factor values.")
ggplot(data = bt_dmg, aes(AP, Damage)) +
geom_line() +
geom_point() +
labs(x = "Attack Power",
y = "Damage",
title = "Bloodthirst scales linearly with attack power") +
scale_x_continuous(breaks = seq(0, 3000, 500))+
scale_y_continuous(breaks = seq(0, 2000, 150))
scenario1_tbl <- tibble::tribble(
~`Weapon`,      ~`Normalized Speed`,   ~`Average Damage`, ~`Attack Power`,
"One Handed Weapon",   2.4,  143, 1750,
"Dagger", 1.5,    105, 1750,
"Two Handed Weapon",   3.3, 258, 1750
)
scenario1 <- scenario1_tbl %>%
clean_names()
knitr::kable(scenario1_tbl, booktabs = TRUE,
caption = "Scenario 1")
ap_vals <- seq(0, 2500, by = 250)
btdmg <- sapply(ap_vals, bt)
n1_sword <- sapply(ap_vals, ww, wpn_spd = 2.4, wpn_swing_dmg = 143)
sword_comparison <- as_tibble(cbind(ap_vals, btdmg, n1_sword)) %>%
rename(n1 = n1_sword) %>%
mutate(n2 = n1 * 2,
n3 = n1 * 3,
n4 = n1 * 4) %>%
# mutate(bt_dpr = btdmg/30,
#        n1_)
pivot_longer(-ap_vals, names_to = "source") %>%
rename(damage = value)
n1_twohander <- sapply(ap_vals, ww, wpn_spd = 3.3, wpn_swing_dmg = 258)
twohander_comparison <- as_tibble(cbind(ap_vals, btdmg, n1_twohander)) %>%
rename(n1 = n1_twohander) %>%
mutate(n2 = n1 * 2,
n3 = n1 * 3,
n4 = n1 * 4) %>%
pivot_longer(-ap_vals, names_to = "source") %>%
rename(damage = value)
n1_dagger <- sapply(ap_vals, ww, wpn_spd = 1.5, wpn_swing_dmg = 105)
dagger_comparison <- as_tibble(cbind(ap_vals, btdmg, n1_dagger)) %>%
rename(n1 = n1_dagger) %>%
mutate(n2 = n1 * 2,
n3 = n1 * 3,
n4 = n1 * 4) %>%
pivot_longer(-ap_vals, names_to = "source") %>%
rename(damage = value)
ap_vals <- seq(0, 2500, by = 250)
btdmg <- sapply(ap_vals, bt)
n1_sword <- sapply(ap_vals, ww, wpn_spd = 2.4, wpn_swing_dmg = 143)
sword_comparison_dpr <- as_tibble(cbind(ap_vals, btdmg, n1_sword)) %>%
rename(n1 = n1_sword) %>%
mutate(n2 = (n1 * 2)/30,
n3 = (n1 * 3)/30,
n4 = (n1 * 4)/30,
n1 = n1/30,
btdmg = btdmg/30) %>%
pivot_longer(-ap_vals, names_to = "source") %>%
rename(dpr = value)
sword_comparison_dpr <- as_tibble(cbind(ap_vals, btdmg, n1_sword)) %>%
rename(n1 = n1_sword) %>%
mutate(n2 = (n1 * 2)/30,
n3 = (n1 * 3)/30,
n4 = (n1 * 4)/30,
n1 = n1/30,
btdmg = btdmg/30) %>%
pivot_longer(-ap_vals, names_to = "source") %>%
rename(dpr = value)
n1_twohander <- sapply(ap_vals, ww, wpn_spd = 3.3, wpn_swing_dmg = 258)
twohander_comparison_dpr <- as_tibble(cbind(ap_vals, btdmg, n1_twohander)) %>%
rename(n1 = n1_twohander) %>%
mutate(n2 = (n1 * 2)/30,
n3 = (n1 * 3)/30,
n4 = (n1 * 4)/30,
n1 = n1/30,
btdmg = btdmg/30) %>%
pivot_longer(-ap_vals, names_to = "source") %>%
rename(dpr = value)
n1_dagger <- sapply(ap_vals, ww, wpn_spd = 1.5, wpn_swing_dmg = 105)
dagger_comparison_dpr <- as_tibble(cbind(ap_vals, btdmg, n1_dagger)) %>%
rename(n1 = n1_dagger) %>%
mutate(n2 = (n1 * 2)/30,
n3 = (n1 * 3)/30,
n4 = (n1 * 4)/30,
n1 = n1/30,
btdmg = btdmg/30) %>%
pivot_longer(-ap_vals, names_to = "source") %>%
rename(dpr = value)
# sword_swings <- rnorm(1000, mean = 143, sd = 3)
# twohander_swings <- rnorm(10000, mean = 258, sd = 3)
# dagger_swings <- rnorm(10000, mean = 105, sd = 3)
#
# ap_vals <- seq(0, 2500, by = 250)
#
# sword_test <- as_tibble(sapply(ap_vals, ww, wpn_spd = 2.4, wpn_swing_dmg = sword_swings)) %>%
#         rename(`0` = V1,
#                `250` = V2,
#                `500` = V3,
#                `750` = V4,
#                `1000` = V5,
#                `1250` = V6,
#                `1500` = V7,
#                `1750` = V8,
#                `2000` = V9,
#                `2250` = V10,
#                `2500` = V11) %>%
#         pivot_longer(cols = `0`:`2500`, names_to = "ap") %>%
#         rename(damage = value) %>%
#         mutate(ap = as.factor(ap))
#
# sword_test %>%
#         ggplot(aes(x = ap, y = damage)) +
#         geom_line()
# # sword_test <- tibble::tribble(
# #             ~`ap0`,      ~`ap250`,   ~`ap500`, ~`ap750`, ~`ap1000`, ~`ap1250`, ~`ap1500`, ~`ap1750`, ~`ap2000`, ~`ap2250`, ~`ap2500`)
# #
# # sword_test <- sword_test %>%
# #         mutate(ap0 = sword_swings)
#
#         # pivot_longer(cols = ap0:ap2500, names_to = "group")
#
# btdmg <- as_tibble(sapply(ap_vals, bt)) %>%
#         rename(damage = value)
#
# sword_test <- sword_test %>%
#         cbind(btdmg)
#
# ggplot(sword_test, aes(x = ap_vals, colour = group)) +
#         geom_density_ridges()
#         # geom_point() +
#         # geom_line() +
#         # scale_colour_manual(values = cbp2,
#         #         name = "Damage source",
#         #         labels = c("Bloodthirst", "n = 1", "n = 2", "n = 3", "n = 4")) +
#         #         scale_y_continuous(breaks = seq(0, 120, by = 15),
#         #                            limits = c(0, 120)) +
#         # labs(x = "Attack Power",
#         #      y = "Damage per Rage",
#         #      title = "Whirlwind has higher DPR than BT at n = 3 or more.",
#         #      subtitle = "Assuming a one hander with 143 mean swing damage and 2.4 weapon speed.")
#
ggplot(twohander_comparison_dpr, aes(x = ap_vals, y = dpr, colour = source)) +
geom_point() +
geom_line() +
scale_colour_manual(values = cbp2,
name = "Damage source",
labels = c("Bloodthirst", "n = 1", "n = 2", "n = 3", "n = 4")) +
scale_y_continuous(breaks = seq(0, 120, by = 15),
limits = c(0, 120)) +
labs(x = "Attack Power",
y = "Damage per Rage",
title = "Whirlwind has higher DPR than BT at n = 2 or more.",
subtitle = "Assuming a two hander with 258 mean swing damage and 3.3 weapon speed.")
ggplot(sword_comparison_dpr, aes(x = ap_vals, y = dpr, colour = source)) +
geom_point() +
geom_line() +
scale_colour_manual(values = cbp2,
name = "Damage source",
labels = c("Bloodthirst", "n = 1", "n = 2", "n = 3", "n = 4")) +
scale_y_continuous(breaks = seq(0, 120, by = 15),
limits = c(0, 120)) +
labs(x = "Attack Power",
y = "Damage per Rage",
title = "Whirlwind has higher DPR than BT at n = 3 or more.",
subtitle = "Assuming a one hander with 143 mean swing damage and 2.4 weapon speed.")
ggplot(dagger_comparison_dpr, aes(x = ap_vals, y = dpr, colour = source)) +
geom_point() +
geom_line() +
scale_colour_manual(values = cbp2,
name = "Damage source",
labels = c("Bloodthirst", "n = 1", "n = 2", "n = 3", "n = 4")) +
scale_y_continuous(breaks = seq(0, 120, by = 15),
limits = c(0, 120)) +
labs(x = "Attack Power",
y = "Damage per Rage",
title = "Whirlwind has higher DPR than BT at n = 4 or more.",
subtitle = "Assuming a dagger with 105 mean swing damage and 1.5 weapon speed.")
View(dagger_comparison_dpr)
library(bookdown)
preview_chapter("03-abilities_rotation.Rmd")
library(cowplot)
plot_grid(p1, p2, p3, labels = c("A", "B", "C"))
p1 <- ggplot(twohander_comparison_dpr, aes(x = ap_vals, y = dpr, colour = source)) +
geom_point() +
geom_line() +
scale_colour_manual(values = cbp2,
name = "Damage source",
labels = c("Bloodthirst", "n = 1", "n = 2", "n = 3", "n = 4")) +
scale_y_continuous(breaks = seq(0, 120, by = 15),
limits = c(0, 120)) +
labs(x = "Attack Power",
y = "Damage per Rage",
title = "Whirlwind has higher DPR than BT at n = 2 or more.",
subtitle = "Assuming a two hander with 258 mean swing damage and 3.3 weapon speed.")
p2 <- ggplot(sword_comparison_dpr, aes(x = ap_vals, y = dpr, colour = source)) +
geom_point() +
geom_line() +
scale_colour_manual(values = cbp2,
name = "Damage source",
labels = c("Bloodthirst", "n = 1", "n = 2", "n = 3", "n = 4")) +
scale_y_continuous(breaks = seq(0, 120, by = 15),
limits = c(0, 120)) +
labs(x = "Attack Power",
y = "Damage per Rage",
title = "Whirlwind has higher DPR than BT at n = 3 or more.",
subtitle = "Assuming a one hander with 143 mean swing damage and 2.4 weapon speed.")
p3 <- ggplot(dagger_comparison_dpr, aes(x = ap_vals, y = dpr, colour = source)) +
geom_point() +
geom_line() +
scale_colour_manual(values = cbp2,
name = "Damage source",
labels = c("Bloodthirst", "n = 1", "n = 2", "n = 3", "n = 4")) +
scale_y_continuous(breaks = seq(0, 120, by = 15),
limits = c(0, 120)) +
labs(x = "Attack Power",
y = "Damage per Rage",
title = "Whirlwind has higher DPR than BT at n = 4 or more.",
subtitle = "Assuming a dagger with 105 mean swing damage and 1.5 weapon speed.")
plot_grid(p1, p2, p3, labels = c("A", "B", "C"))
preview_chapter("03-abilities_rotation")
ggplot(twohander_comparison_dpr, aes(x = ap_vals, y = dpr, colour = source)) +
geom_point() +
geom_line() +
scale_colour_manual(values = cbp2,
name = "Damage source",
labels = c("Bloodthirst", "n = 1", "n = 2", "n = 3", "n = 4")) +
scale_y_continuous(breaks = seq(0, 120, by = 15),
limits = c(0, 120)) +
labs(x = "Attack Power",
y = "Damage per Rage",
title = "Whirlwind has higher DPR than Bloodthirst at n = 2 or more.",
subtitle = "Assuming a two hander with 258 mean swing damage and 3.3 weapon speed.")
ggplot(twohander_comparison_dpr, aes(x = ap_vals, y = dpr, colour = source)) +
geom_point() +
geom_line() +
scale_colour_manual(values = cbp2,
name = "Damage source",
labels = c("Bloodthirst", "n = 1", "n = 2", "n = 3", "n = 4")) +
scale_y_continuous(breaks = seq(0, 120, by = 15),
limits = c(0, 120)) +
labs(x = "Attack Power",
y = "Damage per Rage",
title = "Whirlwind has higher DPR than Bloodthirst at n = 2 or more.",
subtitle = "Assuming a two hander with 258 mean swing damage and 3.3 weapon speed.") +
theme_light()
ggplot(sword_comparison_dpr, aes(x = ap_vals, y = dpr, colour = source)) +
geom_point() +
geom_line() +
scale_colour_manual(values = cbp2,
name = "Damage source",
labels = c("Bloodthirst", "n = 1", "n = 2", "n = 3", "n = 4")) +
scale_y_continuous(breaks = seq(0, 120, by = 15),
limits = c(0, 120)) +
labs(x = "Attack Power",
y = "Damage per Rage",
title = "Whirlwind has higher DPR than Bloodthirst at n = 3 or more.",
subtitle = "Assuming a one hander with 143 mean swing damage and 2.4 weapon speed.") +
theme_light()
ggplot(dagger_comparison_dpr, aes(x = ap_vals, y = dpr, colour = source)) +
geom_point() +
geom_line() +
scale_colour_manual(values = cbp2,
name = "Damage source",
labels = c("Bloodthirst", "n = 1", "n = 2", "n = 3", "n = 4")) +
scale_y_continuous(breaks = seq(0, 120, by = 15),
limits = c(0, 120)) +
labs(x = "Attack Power",
y = "Damage per Rage",
title = "Whirlwind has higher DPR than Bloodthirst at n = 4 or more.",
subtitle = "Assuming a dagger with 105 mean swing damage and 1.5 weapon speed.") +
theme_light()
publish_book()
preview_chapter("03-abilities_and_rotation")
preview_chapter("03-abilities_rotation")
preview_chapter("03-abilities_rotation.Rmd")
bookdown:::mathquill()
execute <- function(rage, ac){
damage = 600 + ((rage-ac)*15)
return(damage)
}
rage <- seq(0, 100, by = 1)
rage <- seq(20, 100, by = 1)
execute_dmg <- sapply(rage, execute, ac = 20)
execute_dmg0 <- sapply(rage, execute, ac = 20)
execute_dmg0 <- sapply(rage, execute, ac = c(20, 15, 10))
execute_dmg <- as_tibble(sapply(rage, execute, ac = c(20, 15, 10)))
View(execute_dmg)
sapply(rage, execute, ac = c(20, 15, 10))
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20))
execute_dmg1 <- as_tibble(sapply(rage, execute, ac = 15))
execute_dmg2 <- as_tibble(sapply(rage, execute, ac = 10))
View(execute_dmg0)
execute_dmg <- as.data.frame(lapply(rage_tresh, execute))
execute_dmg <- as.data.frame(lapply(rage, execute))
execute_dmg <- as.data.frame(lapply(rage, execute, ac = 20))
View(execute_dmg)
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = seq(20, 100, by = 1)) %>%
mutate(dpr = damage/rage)
View(execute_dmg0)
rage <- seq(0, 100, by = 1)
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = seq(20, 100, by = 1)) %>%
mutate(dpr = damage/rage)
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = seq(20, 100, by = 1)) %>%
mutate(dpr = damage/rage)
execute_dmg1 <- as_tibble(sapply(rage, execute, ac = 15)) %>%
rename(damage = value) %>%
mutate(rage = seq(15, 100, by = 1)) %>%
mutate(dpr = damage/rage)
execute_dmg2 <- as_tibble(sapply(rage, execute, ac = 10)) %>%
rename(damage = value) %>%
mutate(rage = seq(10, 100, by = 1)) %>%
mutate(dpr = damage/rage)
rage <- seq(0, 100, by = 1)
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = seq(20, 100, length.out = 81)) %>%
mutate(dpr = damage/rage)
rage <- seq(0, 100, by = 1)
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = seq(20, 100, length.out = 101)) %>%
mutate(dpr = damage/rage)
execute_dmg1 <- as_tibble(sapply(rage, execute, ac = 15)) %>%
rename(damage = value) %>%
mutate(rage = seq(15, 100, length.out = 101)) %>%
mutate(dpr = damage/rage)
execute_dmg2 <- as_tibble(sapply(rage, execute, ac = 10)) %>%
rename(damage = value) %>%
mutate(rage = seq(10, 100, length.out = 101)) %>%
mutate(dpr = damage/rage)
View(execute_dmg0)
View(execute_dmg1)
View(execute_dmg2)
?round
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = round(seq(20, 100, length.out = 101), digits = 2)) %>%
mutate(dpr = damage/rage)
View(execute_dmg0)
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = round(seq(20, 100, length.out = 101), digits = 1)) %>%
mutate(dpr = damage/rage)
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = seq(20, 100, length.out = 101)) %>%
mutate(dpr = damage/rage)
View(execute_dmg0)
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = seq(20, 100, length.out = 101)) %>%
mutate(dpr = damage/rage) %>%
pivot_longer(names_to = "0_points")
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = seq(20, 100, length.out = 101)) %>%
mutate(dpr = damage/rage) %>%
pivot_longer(cols = c(damage, rage, dpr), names_to = "0_points")
View(execute_dmg0)
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = seq(20, 100, length.out = 101)) %>%
mutate(dpr = damage/rage) %>%
pivot_longer(cols = damage, names_to = "0_points")
?pivot_longert
?pivot_longer
vignette("pivot")
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = seq(20, 100, length.out = 101)) %>%
mutate(dpr = damage/rage)
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = seq(20, 100, length.out = 101)) %>%
mutate(dpr = damage/rage) %>%
pivot_longer(cols = damage, names_to = "0_points")
execute_dmg1 <- as_tibble(sapply(rage, execute, ac = 15)) %>%
rename(damage = value) %>%
mutate(rage = seq(15, 100, length.out = 101)) %>%
mutate(dpr = damage/rage)
execute_dmg2 <- as_tibble(sapply(rage, execute, ac = 10)) %>%
rename(damage = value) %>%
mutate(rage = seq(10, 100, length.out = 101)) %>%
mutate(dpr = damage/rage)
ggplot() +
geom_point(execute_dmg0, aes(x = rage, y = damage, size = dpr))
ggplot(execute_dmg0, aes(x = rage, y = damage, size = dpr)) +
geom_point()
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage = value) %>%
mutate(rage = seq(20, 100, length.out = 101)) %>%
mutate(dpr = damage/rage)
ggplot(execute_dmg0, aes(x = rage, y = damage, size = dpr)) +
geom_point()
ggplot(execute_dmg0, aes(x = dpr, y = damage, size = rage)) +
geom_point()
ggplot(execute_dmg0, aes(x = dpr, y = rage, size = damage)) +
geom_point()
ggplot(execute_dmg0, aes(x = dpr, y = rage, size = damage)) +
geom_point() +
theme_light()
View(execute_dmg0)
View(execute_dmg1)
View(hit_factor_tbl)
View(execute_dmg2)
exec_comparison <- bind_cols(execute_dmg0, execute_dmg1, execute_dmg2)
rage <- seq(0, 100, by = 1)
execute_dmg0 <- as_tibble(sapply(rage, execute, ac = 20)) %>%
rename(damage0 = value) %>%
mutate(rage0 = seq(20, 100, length.out = 101)) %>%
mutate(dpr0 = damage0/rage0)
execute_dmg1 <- as_tibble(sapply(rage, execute, ac = 15)) %>%
rename(damage1 = value) %>%
mutate(rage1 = seq(15, 100, length.out = 101)) %>%
mutate(dpr1 = damage1/rage1)
execute_dmg2 <- as_tibble(sapply(rage, execute, ac = 10)) %>%
rename(damage2 = value) %>%
mutate(rage2 = seq(10, 100, length.out = 101)) %>%
mutate(dpr2 = damage2/rage2)
exec_comparison <- bind_cols(execute_dmg0, execute_dmg1, execute_dmg2)
View(exec_comparison)
publish_book()
execute <- function(rage, points = c(0, 1, 2)){
if(points = 0){
execute <- function(rage, points = c(0, 1, 2)){
if(points == 0){
added = rage-20
} else if (points == 1){
added = rage-15
} else if (points == 2){
added = rage-10
}
damage = 600 + (added*15)
return(damage)
}
execute(100, points = 0)
execute(100, points = 1)
execute(100, points = 2)
